name: Run Repository Analysis

on:
  workflow_dispatch:
    inputs:
      repo_url:
        description: "GitHub repository URL to analyze"
        required: true
        default: "https://github.com/mandoobaba2/cowsay"
      branch:
        description: "Branch name"
        required: true
        default: "master"

jobs:
  analyze:
    runs-on: ubuntu-latest
    steps:
      - name: Run external analyze action
        id: analyze
        uses: mandoobaba2/ondemand-analysis-action@main
        with:
          repo_url: ${{ github.event.inputs.repo_url }}
          branch: ${{ github.event.inputs.branch }}
          ondemand_api_key: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxMjAiLCJpc3MiOiJvbmRlbWFuZCIsInRva2VuSWQiOjM2LCJ1c2VybmFtZSI6InRlc3R1c2VybWluIiwicm9sZXMiOiJVU0VSIiwiZXhwIjoxOTc3NTQyNjQwfQ.TDsalhu-VQx4HzXCrf-v7AlEpnnFXHVvWViH67JLAoUWn_4N8agX7Dz2jUBPK89uwd3YvqJLuvbcWt8cmHT4Xg

      # - name: Output result
      #   run: |
      #     echo "분석 결과 JSON:"
      #     echo '${{ steps.analyze.outputs.result_json }}'